<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Visual Novel</title>

  <style>
    :root{
      --bg:#0b0f1a;
      --card:#121a2b;
      --text:#e9eefc;
      --muted:#a7b3d6;
    }
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{ max-width:920px; margin:0 auto; padding:16px; }
    .scene{
      background:var(--card);
      border-radius:18px;
      overflow:hidden;
      box-shadow:0 14px 40px rgba(0,0,0,.35);
    }

    /* Верхня панель */
    .top{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      padding:12px;
      background:rgba(0,0,0,.15);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .title{
      font-weight:700;
      letter-spacing:.2px;
    }
    .btn{
      appearance:none;
      border:none;
      border-radius:14px;
      padding:12px 14px;
      background:#1a2440;
      color:var(--text);
      font-size:15px;
    }
    .btn:active{ transform:scale(.99); }

    /* Фон + персонаж як у візуальній новелі */
    .imgbox{
      position:relative;
      height:min(560px, 70vh);
      background:#0b1224;
    }
    .background{
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
      filter:saturate(1.05) contrast(1.02);
    }
    .character{
      position:absolute;
      bottom:0;
      left:50%;
      transform:translateX(-50%);
      max-height:96%;
      max-width:92%;
      object-fit:contain;
      pointer-events:none;
      filter: drop-shadow(0 18px 24px rgba(0,0,0,.45));
    }

    /* Текстова зона (ім'я + репліка/опис) */
    .textbox{
      padding:14px 14px 16px;
    }
    .name{
      font-weight:800;
      font-size:22px;
      margin:4px 0 8px;
    }
    .text{
      font-size:19px;
      line-height:1.35;
      color:var(--text);
      margin:0;
    }
    .hint{
      color:var(--muted);
      font-size:13px;
      margin-top:10px;
      opacity:.9;
    }

    /* ВИБОРИ ПОВЕРХ СЦЕНИ (як у Romance Club) */
    .choices{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:18px;
      width:calc(100% - 24px);
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:20;
    }
    .choices button{
      background: linear-gradient(180deg, #2f3b66, #1c2544);
      color:#fff;
      border:none;
      border-radius:14px;
      padding:14px 16px;
      font-size:16px;
      text-align:left;
      box-shadow:0 10px 26px rgba(0,0,0,.22);
    }
    .choices button:active{ transform:scale(.99); }

    /* Легке затемнення під виборами (щоб читалось) */
    .choiceShade{
      position:absolute;
      inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,0) 55%, rgba(0,0,0,.35) 100%);
      z-index:19;
      pointer-events:none;
      opacity:0;
      transition:.2s ease;
    }
    .choiceShade.on{ opacity:1; }

    .hidden{ display:none; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="scene">
      <div class="top">
        <div class="title" id="chapterTitle">Пролог</div>
        <div style="display:flex; gap:10px;">
          <button class="btn" id="btnBack">◀ Назад</button>
          <button class="btn" id="btnRestart">⟲ Спочатку</button>
        </div>
      </div>

      <div class="imgbox" id="imgbox">
        <div class="background" id="bg"></div>
        <img class="character hidden" id="char" alt="character"/>

        <!-- затемнення під вибори -->
        <div class="choiceShade" id="choiceShade"></div>

        <!-- ВИБОРИ ПОВЕРХ -->
        <div class="choices hidden" id="choices"></div>
      </div>

      <div class="textbox">
        <div class="name" id="name">Наратор</div>
        <p class="text" id="text">...</p>
        <div class="hint" id="hint">Тапніть по сцені, щоб продовжити. Якщо є вибір — натисніть варіант.</div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // 1) ВАША ІСТОРІЯ — ВСТАВ ТУТ
    // =========================
    // Формат сцени:
    // {
    //   title: "Пролог",               // необов’язково
    //   bg: "images/backgrounds/garden.jpg",
    //   char: "images/characters/neutral.png", // або null
    //   name: "Вона",
    //   text: "Текст сцени...",
    //   choices: [
    //     { text: "Варіант 1", next: 10 },
    //     { text: "Варіант 2", next: 20 }
    //   ]
    // }
    //
    // IMPORTANT: якщо choices є — кнопка "далі" не працює, поки не зробиш вибір.

    const story = [
      // ⬇️ ЗАМІНИ ЦІ ПРИКЛАДИ НА ВАШУ ПОВНУ ІСТОРІЮ
      {
        title: "Пролог",
        bg: "images/backgrounds/courtyard_night.jpg",
        char: null,
        name: "Наратор",
        text: "Ніч була тихою... аж поки не прийшло дивне повідомлення."
      },
      {
        title: "Пролог",
        bg: "images/backgrounds/courtyard_night.jpg",
        char: "images/characters/neutral.png",
        name: "Вона",
        text: "Ти мимоволі усміхаєшся: «Окей. Я приймаю правила гри».",
        choices: [
          { text: "Піти за координатою", next: 2 },
          { text: "Залишитися вдома", next: 3 }
        ]
      },
      {
        title: "Пролог",
        bg: "images/backgrounds/garden.jpg",
        char: "images/characters/joy.png",
        name: "Вона",
        text: "Ти вдихаєш повітря і робиш крок вперед. Щось у цьому місці… не випадкове."
      },
      {
        title: "Пролог",
        bg: "images/backgrounds/bedroom.jpg",
        char: "images/characters/annoyed.png",
        name: "Вона",
        text: "Ти намагаєшся заснути, але думки не дають спокою. Повідомлення знову блимає на екрані."
      }
    ];

    // =========================
    // 2) ДВИЖОК
    // =========================
    let step = 0;

    const elBg = document.getElementById("bg");
    const elChar = document.getElementById("char");
    const elName = document.getElementById("name");
    const elText = document.getElementById("text");
    const elTitle = document.getElementById("chapterTitle");
    const elChoices = document.getElementById("choices");
    const elShade = document.getElementById("choiceShade");

    function hideChoices(){
      elChoices.classList.add("hidden");
      elChoices.innerHTML = "";
      elShade.classList.remove("on");
    }

    function showChoices(choiceList){
      elChoices.innerHTML = "";
      elChoices.classList.remove("hidden");
      elShade.classList.add("on");

      choiceList.forEach(ch => {
        const btn = document.createElement("button");
        btn.textContent = ch.text;
        btn.onclick = () => {
          hideChoices();
          goTo(ch.next);
        };
        elChoices.appendChild(btn);
      });
    }

    function goTo(index){
      step = Math.max(0, Math.min(index, story.length - 1));
      render();
    }

    function render(){
      const s = story[step];

      // Title (необов'язково)
      elTitle.textContent = s.title ? s.title : "Історія";

      // BG
      elBg.style.backgroundImage = s.bg ? `url("${s.bg}")` : "none";

      // Character
      if (s.char) {
        elChar.src = s.char;
        elChar.classList.remove("hidden");
      } else {
        elChar.classList.add("hidden");
        elChar.removeAttribute("src");
      }

      // Text
      elName.textContent = s.name || "Наратор";
      elText.textContent = s.text || "";

      // Choices
      hideChoices();
      if (s.choices && s.choices.length) {
        showChoices(s.choices);
      }
    }

    function next(){
      const s = story[step];
      // якщо на сцені вибір — не можна йти далі тапом
      if (s.choices && s.choices.length) return;

      if (step < story.length - 1){
        step++;
        render();
      }
    }

    // =========================
    // 3) КНОПКИ + ТАП ПО СЦЕНІ
    // =========================
    document.getElementById("btnBack").addEventListener("click", () => {
      if (step > 0) { step--; render(); }
    });

    document.getElementById("btnRestart").addEventListener("click", () => {
      step = 0; render();
    });

    // Тап по сцені = "далі" (але якщо вибір, то ігноруємо)
    document.getElementById("imgbox").addEventListener("click", next);

    // старт
    render();
  </script>
</body>
</html>